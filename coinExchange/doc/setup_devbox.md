Dev Environment: Python 3, MySQL, Django 2.0 

sudo apt-get update

## Install Python 3
Ubuntu Linux 16.04 LTS includes Python 3.5.2 by default. You can confirm this by running the following command in the bash terminal: (* python3 -V *)
However the Python Package Index tool you'll need to install packages for Python 3 (including Django) is not available by default. You can install pip3 in the bash terminal using:
```
sudo apt-get install python3-pip
```

## Using Django inside a Python virtual environment

Create virtual env
```
cd /{PATH}/coinExchange/
# on AWS 16.04 Ubuntu, this pip uses python 2.7, and need additional
# install for pip itself
pip install --upgrade virtualenv

# if you want to use python3 installer, use the following
#pip3 install --upgrade virtualenv

virtualenv -p python3 dj2env
source dj2env/bin/activate   (deactivate)
python -V
```

Install Django 2.0
```
pip install Django==2.0
python -m django --version
```

## Setup MySQL
sudo apt-get install mysql-server

sudo apt-get -y install git build-essential libssl-dev libdb++-dev libboost-all-dev libqrencode-dev libminiupnpc-dev python-dev libmysqlclient-dev python-setuptools 

sudo apt-get install libtiff5-dev libjpeg8-dev zlib1g-dev libfreetype6-dev liblcms2-dev libwebp-dev tcl8.6-dev tk8.6-dev python-tk

## Install packages

TODO, change to one stop install: pip install -r requirements/dev.txt

For MAC, you need to do the following to install mysqlclient under python3's virtualenv.
```
brew install mysql-connector-c
which mysql_config
```
Then edit mysql_config, change the following
```
# Create options 
libs="-L$pkglibdir"
libs="$libs -l 
```
to 
```
# Create options 
libs="-L$pkglibdir"
libs="$libs -lmysqlclient -lssl -lcrypto"
```
Then, run
```
brew info openssl
pip3 install mysqlclient
```

Install client libraries for python on Ubuntu:
```
sudo apt-get install python3-dev libmysqlclient-dev
pip install mysqlclient

pip install --upgrade Pillow
pip install django-mathfilters
```

Set up qrcode tools:
```
sudo apt-get install libzbar-dev
#sudo apt install qrencode
pip install qrcode
#sudo pip install zbar
#sudo pip install qrtools
```



????? need? create folder for payment qrcode images
cd ~/projects/xwjy/coinExchange/
mkdir qrcode


# Prepare database
Create db: mydb
```
create database mydb character set utf8;
GRANT ALL PRIVILEGES ON mydb.* TO 'mydbuser'@'localhost' IDENTIFIED BY 'aaaaaa';
```

in Linux prompt
cd ~/projects/xwjy/coinExchange/

Execute the code generated by makemigration to really create tables, and create the super user for manage site.
```
python manage.py makemigrations --settings=coinExchange.settings.dev
python manage.py migrate --settings=coinExchange.settings.dev
python manage.py createsuperuser --settings=coinExchange.settings.dev
```

Load predefined data.
```
python manage.py loaddata trading/dbInitial/chi_devbox/init_data.json
python manage.py loaddata trading/dbInitial/chi_devbox/add_axfund_addresses.json
```

# Compile & Start wallet
to do ...

# Start application
Choose different settings: 
```
python manage.py runserver --settings=coinExcnge.settings.dev
python manage.py runserver --settings=coinExcnge.settings.production
```

or 
```
export DJANGO_SETTINGS_MODULE=coinExchange.settings.dev
python manage.py runserver
```

# Testing
Before you run the test, go to mysql and run the following to give access rights of the test db to the default user.
```
GRANT ALL PRIVILEGES ON test_mydb.* TO 'mydbuser'@'localhost' IDENTIFIED BY 'aaaaaa';
```
Then install jinja2 for test
```
pip install jinja2
```
Then, you need to run the following way.  This will put test to site_test.log under xwjy/coinExchange
```
python manage.py test trading.tests.<test file>[.testclass[.test_function]] --settings=coinExchange.settings.test
```


https://1drv.ms/u/s!ApvPY5vduimfnCUFn3rXYqKF9uKm
